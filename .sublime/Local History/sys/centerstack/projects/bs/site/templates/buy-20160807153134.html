<!--==========================
 *  Author:		Dave Luke Jr
 *  Company:	CenterStack.io
 *  Description:	buy.html
 *==========================-->
{% extends "base.html" %}
{% load widget_tweaks %}
{% load humanize %}
{% load mathfilters %}
{% load el_pagination_tags %}
{% load staticfiles %}
{% load customtags %}
{% block content %}


<div class="container-fluid p-t-60 grey-bg fullwidth-wrapper">
	<div class="row">
		<div id="left-col" class="col-sm-4 p-b-100">

			{% paginate 15 PropertyFilter %}
			{% for property in PropertyFilter %}

				<div class="listing-row">
					<div class="listing-row-inner">
						<div class="listing-row-image" style="background-image: url({{ property.img.0 }});">
							<span class="listing-row-image-links">
								<a href="{% url 'buy-single' pk=property.pk %}">
									<i class="fa fa-search"> </i>
									<span> View detail </span>
								</a>
							</span>
						</div>

						<!--	Row Content
						========================================= -->
						<div class="listing-row-content">
							<h3><a href="{% url 'buy-single' pk=property.pk %}"> {{ property.streetnumber }} {{ property.streetname }} {{ property.streetsuffix }} </a></h3>
							<h4 class="m-t-0"> ${{ property.listingprice|floatformat:"0"|intcomma }} </h4>
							<ul class="listing-row-attributes">
								<li><i class="fontello-city"></i> City <span> {{ property.city }} </span></li>
								<li><i class="fontello-section"></i> Section <span> {{ property.section }} </span></li>
								<li><i class="fontello-sqft"></i> Sqft. <span> {{ property.squarefootage|floatformat:"0"|intcomma }} </span></li>
								<li><i class="fontello-map"></i> Acres <span> {{ property.acres }} </span></li>
								<li><i class="fontello-beds"></i> Bedrooms <span> {{ property.bedrooms }} </span></li>
								<li><i class="fontello-baths"></i> Baths <span> {{ property.bathrooms }} </span></li>
							</ul>
						</div>
					</div>
				</div>

			{% endfor %}
			{% show_pages %}
			
			<span class="fontello-tree-decidious"></span>
			<span class="fontello-chart-line"></span>
			<span class="fontello-map"></span>
			<span class="fontello-ruler"></span>
			<span class="fa fa-arrows-alt"></span>
			<span class="fontello-house149"></span>
			<span class="fontello-house"></span>
			<span class="fontello-home"></span>
			<span class="fontello-home-1"></span>
			<span class="fontello-home-173"></span>
			<span class="fontello-compass-1"></span>
			<span class="fontello-compass-1"></span>


			<!--	Map Markers
			========================================= -->
			<script>
				var values = [
					{% for property in PropertyFilter %}
						{
							"id": "marker-{{ property.listingrid }}",
							"center": [{{ property.latitude }}, {{ property.longitude }}],
							"icon": "{% with d=property.listingprice|num_digits %}{% if d >= 6 %}<p>${{ property.listingprice|div:1000000|floatformat:"2"|intcomma }}M</p>{% else %}<p>${{ property.listingprice|div:1000|floatformat:"2"|intcomma }}K</p>{% endif %}{% endwith %}",
							"title": "{{ property.streetnumber }} {{ property.streetname }} {{ property.streetsuffix }}",
							"price": "${{ property.listingprice }}",
							"image": "{{ property.img.0 }}"
						},
					{% endfor %}
				]
			</script>
		</div>



		<!--	Map
		========================================= -->
		<div id="right-col" class="col-sm-8 p-rl-0">
			<div class="map-div">
				<div id="map-google"></div>
			</div>
		</div>
		<script>
			$(function() {
				markers = []
				$.each(values, function(index, value) {
					var content ='<div id="'+ value.id + '" class="map-popup-content-wrapper"><div class="map-popup-content"><div class="listing-window-image-wrapper">' + '<a href="properties-detail-standard.html">' + '<div class="listing-window-image"style="background-image: url(' + value.image + ');"></div>' + '<div class="listing-window-content">' + '<div class="info">' + '<h2>' + value.title + '</h2>' + '<h3>' + value.price + '</h3>' + '</div>' + '</div>' + '</a>' + '</div></div><i class="fa fa-close close"></i></div>' + '<div class="map-marker">' + value.icon + '</div>';
					markers.push({
						latLng: value.center, 
						data: value.id,			
						options: { content: content, offset: { x: -18, y: -42 }							 }
					});
				});
				$('#map-google').gmap3({		
					map: {									
						options:{
							styles: [{"featureType":"poi","elementType":"labels.text.fill","stylers":[{"color":"#747474"},{"lightness":"23"}]},{"featureType":"poi.attraction","elementType":"geometry.fill","stylers":[{"color":"#f38eb0"}]},{"featureType":"poi.government","elementType":"geometry.fill","stylers":[{"color":"#ced7db"}]},{"featureType":"poi.medical","elementType":"geometry.fill","stylers":[{"color":"#ffa5a8"}]},{"featureType":"poi.park","elementType":"geometry.fill","stylers":[{"color":"#c7e5c8"}]},{"featureType":"poi.place_of_worship","elementType":"geometry.fill","stylers":[{"color":"#d6cbc7"}]},{"featureType":"poi.school","elementType":"geometry.fill","stylers":[{"color":"#c4c9e8"}]},{"featureType":"poi.sports_complex","elementType":"geometry.fill","stylers":[{"color":"#b1eaf1"}]},{"featureType":"road","elementType":"geometry","stylers":[{"lightness":"100"}]},{"featureType":"road","elementType":"labels","stylers":[{"visibility":"off"},{"lightness":"100"}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#ffd4a5"}]},{"featureType":"road.arterial","elementType":"geometry.fill","stylers":[{"color":"#ffe9d2"}]},{"featureType":"road.local","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"road.local","elementType":"geometry.fill","stylers":[{"weight":"3.00"}]},{"featureType":"road.local","elementType":"geometry.stroke","stylers":[{"weight":"0.30"}]},{"featureType":"road.local","elementType":"labels.text","stylers":[{"visibility":"on"}]},{"featureType":"road.local","elementType":"labels.text.fill","stylers":[{"color":"#747474"},{"lightness":"36"}]},{"featureType":"road.local","elementType":"labels.text.stroke","stylers":[{"color":"#e9e5dc"},{"lightness":"30"}]},{"featureType":"transit.line","elementType":"geometry","stylers":[{"visibility":"on"},{"lightness":"100"}]},{"featureType":"water","elementType":"all","stylers":[{"color":"#d2e7f7"}]}],
							center:[44.117511, -121.331884],
							scrollwheel: false,
							panControl:true,
							mapTypeControl:false,
							scaleControl:true,
							streetViewControl:false,
							overviewMapControl:false,
							rotateControl:false,
							zoomControl: true,
							zoomControlOptions: {
								position: google.maps.ControlPosition.RIGHT_CENTER
							},
							mapTypeId: google.maps.MapTypeId.ROADMAP,
							zoom: 10
						}
					},
					overlay: {
						values: markers,
						events: {
							click: function(marker, event, context) {															
								$('.map-popup-content-wrapper').css('display', 'none');

								if ($(event[0].target).hasClass('close')) {
									$('#' + context.data).css('display', 'none');
								} else {
									$('#' + context.data).css('display', 'block');
								}
							}
						}
					}
				});					
			});
		</script>
	</div>
</div>

	

	
	



{% endblock %}